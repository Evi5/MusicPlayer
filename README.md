# 概述
没找到好用的歌词偏移调整工具，所以自己写了一个，基本功能正常，但可能有小bug
## 功能：
1. 网页播放音乐，仅在edge上测试
2. 数据由后台的python提供
3. 支持普通lrc歌词显示、调整偏移、新建
4. 支持逐字歌词显示、调整偏移、新建、保存
5. 英文部分歌词去*、歌词时间格式验证及修正/提醒
6. 支持双语歌词
7. 歌曲格式支持：flac、mp3
## 备注：
* 部分代码来源网络

# 安装：
python3
## python3 依赖模块
```bash
pip3 install mutagen flask flask_cors urllib
```

# 运行
## server/server.py
这是一个简单的后台服务，用于为网页提供数据，运行：
```bash
python3 server.py
```
运行后会在当前目录下生成datas文件夹【如果没有就先运行一次再Ctrl+c停止就会自动生成】，其中
1. music 请将音乐放在这里
2. lyrics 歌词放在这里，要与歌曲同名，后缀.lrc；如果有内嵌歌词可以忽略（会自动生成）
3. covers 歌曲内嵌封面（会自动生成）
4. lyrics_new 调整歌词偏移或新建歌词切歌后可以自动保存在这里

## index.html
网页端直接运行就会自动从以上获取数据

# 功能及操作方法
## 按钮/快捷键
### 全局
| 类别 | 目标 | 功能 |
|---|---|---|
| 方向键 | 上 | 切换到上一首歌并保存歌词到lyrics_new |
| 方向键 | 下 | 切换到下一首歌并保存歌词到lyrics_new |
| 按键 | Shift | 播放/暂停 |
| 按钮 | 右上角绿色开关 | 绿色状态会保存歌词，否则不会保存 |
| 按钮 | 黑色按钮 | 对应不同页面，分别存储对应的歌词原文本 |

### 播放界面
| 类别 | 目标 | 功能 |
|---|---|---|
| 方向键 | 左 | 偏移-0.1秒 |
| 方向键 | 左长按 | 偏移-加速 |
| 方向键 | 右 | 偏移+0.1秒 |
| 方向键 | 右长按 | 偏移+加速 |

### lrc界面
| 类别 | 目标 | 功能 |
|---|---|---|
| 方向键 | 左 | 进度条退回5秒 |
| 方向键 | 左长按 | 进度条退回加速 |
| 方向键 | 右 | 进度条快进5秒 |
| 方向键 | 右长按 | 进度条快进加速 |
| 鼠标 | 左键点击歌词行 | 进度条跳转到对应的时间-1.5秒，并标记其为目标行 |
| 鼠标 | 左键点击播放面板 | 开始记录歌词时间（单行） |
| 鼠标 | 右键点击播放面板 | 开始记录歌词时间（双行） 一般用于有翻译的歌词|
| 按键 | x/X | 清除目标行的格式 |

### 增强lrc界面
| 类别 | 目标 | 功能 |
|---|---|---|
| 方向键 | 左 | 进度条退回1秒 |
| 方向键 | 左长按 | 进度条退回加速 |
| 方向键 | 右 | 进度条快进1秒 |
| 方向键 | 右长按 | 进度条快进加速 |
| 鼠标 | 左键点击歌词行 | 进度条跳转到对应的时间-1.5秒，并标记其为目标行 |
| 鼠标 | 左键点击播放面板-按下 | 开始记录逐字歌词开始时间 |
| 鼠标 | 左键点击播放面板-抬起 | 开始记录逐字歌词结束时间 |
| 按键 | x/X | 清除目标行的格式 |

鼠标抬起和按下的间隔时间会自动计算并平分到前后的文字时间中

# 运行截图
## 播放界面
### 单行lrc歌词
![play](assets/play.png)
### 双行 逐字歌词
![play](assets/play2.png)
## lrc歌词新建/编辑界面
### 单语歌词 lrc
![lrc](assets/lrc.png)
### 双语歌词 逐字
![play2](assets/lrc2.png)
## 逐字歌词界面
### 逐字歌词 单行
![elrc](assets/elrc.png)

### 逐字歌词 双行
![elrc2](assets/elrc2.png)





# 当前存在的问题
1. 仅支持中英简单的分词，可能有小问题
    【当前分词的目标在于保持人唱歌的节奏，一个字对应鼠标点一下，唱的越久鼠标按的越久，这样熟悉的歌可以提高逐字歌词的准确度】